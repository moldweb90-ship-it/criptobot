<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RSI Long Only Strategy - Crypto Bot</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      color: white;
    }

    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .header .strategy-badge {
      display: inline-block;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-top: 10px;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
    }

    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .strategy-info {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      text-align: center;
    }

    .strategy-info h2 {
      color: #2d3748;
      margin-bottom: 20px;
      font-size: 1.8rem;
    }

    .strategy-rules {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .rule-card {
      background: #f8fafc;
      border-radius: 12px;
      padding: 20px;
      border-left: 4px solid #4299e1;
    }

    .rule-card.long {
      border-left-color: #48bb78;
    }

    .rule-card.short {
      border-left-color: #f56565;
    }

    .rule-title {
      font-weight: 700;
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: #2d3748;
    }

    .rule-desc {
      color: #718096;
      line-height: 1.6;
    }

    .crypto-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 15px;
      margin-bottom: 30px;
    }

    .crypto-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 15px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s ease;
      min-height: 220px;
    }

    .crypto-card:hover {
      transform: translateY(-5px);
    }

    .header-card {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
    }

    .icon {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      color: white;
    }

    .icon.btc { background: linear-gradient(135deg, #f7931a 0%, #ffa726 100%); }
    .icon.eth { background: linear-gradient(135deg, #627eea 0%, #8c9eff 100%); }
    .icon.sol { background: linear-gradient(135deg, #9945ff 0%, #14f195 100%); }
    .icon.xrp { background: linear-gradient(135deg, #23292f 0%, #4a90e2 100%); }
    .icon.bnb { background: linear-gradient(135deg, #f3ba2f 0%, #f7d794 100%); }
    .icon.doge { background: linear-gradient(135deg, #c2a633 0%, #d4c17d 100%); }

    .title {
      font-size: 14px;
      font-weight: 700;
      color: #2d3748;
    }

    .subtitle {
      font-size: 10px;
      color: #718096;
      margin-top: 2px;
    }

    .price-display {
      text-align: center;
      margin: 15px 0;
    }

    .price {
      font-size: 20px;
      font-weight: 800;
      color: #2d3748;
      margin-bottom: 4px;
      transition: all 0.3s ease;
    }

    .change {
      font-size: 16px;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: 12px;
      display: inline-block;
    }

    .change.positive {
      background: #c6f6d5;
      color: #22543d;
    }

    .change.negative {
      background: #fed7d7;
      color: #742a2a;
    }

    .rsi-indicator {
      text-align: center;
      margin: 15px 0;
      padding: 10px;
      border-radius: 8px;
      background: #f8fafc;
    }

    .rsi-value {
      font-size: 24px;
      font-weight: 800;
      margin-bottom: 5px;
    }

    .rsi-value.oversold {
      color: #48bb78;
    }

    .rsi-value.overbought {
      color: #f56565;
    }

    .rsi-value.neutral {
      color: #718096;
    }

    .rsi-label {
      font-size: 12px;
      color: #718096;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .rsi-signal {
      text-align: center;
      margin: 10px 0;
      padding: 8px;
      border-radius: 6px;
      font-weight: 700;
      font-size: 14px;
    }

    .rsi-signal.long {
      background: #c6f6d5;
      color: #22543d;
    }

    .rsi-signal.short {
      background: #fed7d7;
      color: #742a2a;
    }

    .rsi-signal.neutral {
      background: #e2e8f0;
      color: #718096;
    }

    .stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px;
      margin-top: 12px;
    }

    .stat {
      font-size: 11px;
      color: #718096;
    }

    .stat-value {
      font-weight: 600;
      color: #2d3748;
    }

    .connection-status {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 15px;
      font-size: 12px;
      color: #718096;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #48bb78;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* –ë—É—Ä–≥–µ—Ä–Ω–æ–µ –º–µ–Ω—é */
    .burger-menu {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }

    .burger-button {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 50px;
      height: 50px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
      transition: all 0.3s ease;
    }

    .burger-line {
      width: 24px;
      height: 3px;
      background: #2d3748;
      margin: 2px 0;
      transition: all 0.3s ease;
      border-radius: 2px;
    }

    .burger-button:hover .burger-line {
      background: #4299e1;
    }

    .burger-button.active .burger-line:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .burger-button.active .burger-line:nth-child(2) {
      opacity: 0;
    }

    .burger-button.active .burger-line:nth-child(3) {
      transform: rotate(-45deg) translate(7px, -6px);
    }

    .burger-menu-content {
      position: absolute;
      top: 60px;
      left: 0;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      min-width: 250px;
      max-width: 300px;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-20px);
      transition: all 0.3s ease;
      overflow: hidden;
    }

    .burger-menu-content.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .burger-menu-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      text-align: center;
    }

    .burger-menu-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .burger-menu-subtitle {
      font-size: 12px;
      opacity: 0.9;
    }

    .burger-menu-items {
      padding: 10px 0;
    }

    .burger-menu-item {
      display: flex;
      align-items: center;
      padding: 15px 20px;
      color: #2d3748;
      text-decoration: none;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
    }

    .burger-menu-item:hover {
      background: #f7fafc;
      border-left-color: #4299e1;
      color: #4299e1;
    }

    .burger-menu-item.active {
      background: #e6fffa;
      border-left-color: #38a169;
      color: #38a169;
    }

    .burger-menu-icon {
      font-size: 20px;
      margin-right: 12px;
      width: 24px;
      text-align: center;
    }

    .burger-menu-text {
      font-weight: 600;
      font-size: 14px;
    }

    .burger-menu-desc {
      font-size: 11px;
      color: #718096;
      margin-top: 2px;
    }

    .burger-menu-divider {
      height: 1px;
      background: #e2e8f0;
      margin: 10px 20px;
    }

    /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–µ–Ω—é */
    .horizontal-menu {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid #e2e8f0;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .menu-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .burger-icon {
      background: none;
      border: none;
      cursor: pointer;
      padding: 5px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      z-index: 1001;
    }

    .burger-icon span {
      width: 25px;
      height: 3px;
      background: #2d3748;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    .burger-icon:hover span {
      background: #4299e1;
    }

    .menu-left .logo {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-icon {
      font-size: 24px;
    }

    .logo-text {
      font-size: 18px;
      font-weight: 700;
      color: #2d3748;
    }

    .menu-center .balance-info {
      display: flex;
      gap: 30px;
      align-items: center;
    }

    .balance-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }

    .balance-label {
      font-size: 12px;
      color: #718096;
      font-weight: 500;
    }

    .balance-value {
      font-size: 16px;
      font-weight: 700;
      color: #2d3748;
    }

    .balance-value.positive {
      color: #48bb78;
    }

    .balance-value.negative {
      color: #f56565;
    }

    .menu-right .connection-status {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #718096;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #48bb78;
      animation: pulse 2s infinite;
    }

    .status-dot.disconnected {
      background: #f56565;
    }

    /* –û—Ç—Å—Ç—É–ø –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ–¥ –º–µ–Ω—é */
    .container {
      margin-top: 80px;
      max-width: 100%;
      padding: 0 20px;
    }

    @media (max-width: 768px) {
      .crypto-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .strategy-rules {
        grid-template-columns: 1fr;
      }

      .menu-center .balance-info {
        gap: 15px;
      }

      .balance-item {
        min-width: 60px;
      }

      .balance-label {
        font-size: 10px;
      }

      .balance-value {
        font-size: 14px;
      }
    }

    /* –°–µ–∫—Ü–∏–∏ —Å–¥–µ–ª–æ–∫ */
    .positions-section, .history-section, .crypto-stats-section, .long-short-stats-section, .losses-section, .trading-controls-section {
      margin-top: 40px;
      margin-bottom: 40px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª–µ–π */
    .trading-controls {
      margin-top: 20px;
    }

    .control-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 15px;
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: 12px;
      border-left: 4px solid #4299e1;
    }

    .control-header span {
      font-weight: 600;
      color: #2d3748;
    }

    .control-buttons {
      display: flex;
      gap: 10px;
    }

    .control-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
    }

    .control-btn.enable {
      background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
      color: white;
    }

    .control-btn.enable:hover {
      background: linear-gradient(135deg, #38a169 0%, #2f855a 100%);
      transform: translateY(-1px);
    }

    .control-btn.disable {
      background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
      color: white;
    }

    .control-btn.disable:hover {
      background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%);
      transform: translateY(-1px);
    }

    .coins-toggle-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .coin-toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px;
      background: linear-gradient(135deg, #ffffff 0%, #f7fafc 100%);
      border-radius: 12px;
      border: 2px solid #e2e8f0;
      transition: all 0.3s ease;
    }

    .coin-toggle:hover {
      border-color: #4299e1;
      box-shadow: 0 4px 12px rgba(66, 153, 225, 0.15);
    }

    .coin-toggle.disabled {
      background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%);
      border-color: #f56565;
      opacity: 0.7;
    }

    .coin-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .coin-icon {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      font-weight: bold;
      font-size: 14px;
    }

    .coin-icon.btc { background: linear-gradient(135deg, #f7931a 0%, #ff6b35 100%); color: white; }
    .coin-icon.eth { background: linear-gradient(135deg, #627eea 0%, #4f46e5 100%); color: white; }
    .coin-icon.sol { background: linear-gradient(135deg, #9945ff 0%, #14f195 100%); color: white; }
    .coin-icon.xrp { background: linear-gradient(135deg, #23292f 0%, #3659f4 100%); color: white; }
    .coin-icon.bnb { background: linear-gradient(135deg, #f3ba2f 0%, #ff6b35 100%); color: white; }
    .coin-icon.doge { background: linear-gradient(135deg, #c2a633 0%, #f3ba2f 100%); color: white; }

    .coin-name {
      font-weight: 600;
      color: #2d3748;
    }

    .coin-status {
      font-size: 12px;
      color: #718096;
    }

    .toggle-switch {
      position: relative;
      width: 50px;
      height: 24px;
      background: #cbd5e0;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .toggle-switch.active {
      background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
    }

    .toggle-switch.disabled {
      background: #f56565;
    }

    .toggle-slider {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .toggle-switch.active .toggle-slider {
      transform: translateX(26px);
    }

    /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–Ω–µ—Ç–∞–º */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 15px;
      margin-top: 20px;
    }

    @media (max-width: 1200px) {
      .stats-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 768px) {
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 480px) {
      .stats-grid {
        grid-template-columns: 1fr;
      }
    }

    .stat-card {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: 12px;
      padding: 15px;
      border-left: 4px solid #4299e1;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      min-height: 140px;
    }

    .stat-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    }

    .stat-card.profitable {
      border-left-color: #48bb78;
      background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
    }

    .stat-card.loss {
      border-left-color: #f56565;
      background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
    }

    .stat-card.top-profit {
      border-left-color: #38a169;
      background: linear-gradient(135deg, #e6fffa 0%, #b2f5ea 100%);
      box-shadow: 0 0 20px rgba(56, 161, 105, 0.3);
    }

    .stat-card.top-loss {
      border-left-color: #e53e3e;
      background: linear-gradient(135deg, #fffaf0 0%, #fbd38d 100%);
      box-shadow: 0 0 20px rgba(229, 62, 62, 0.3);
    }

    .stat-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .stat-icon {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
      color: white;
    }

    .stat-icon.btc { background: linear-gradient(135deg, #f7931a 0%, #ffa726 100%); }
    .stat-icon.eth { background: linear-gradient(135deg, #627eea 0%, #8c9eff 100%); }
    .stat-icon.sol { background: linear-gradient(135deg, #9945ff 0%, #14f195 100%); }
    .stat-icon.xrp { background: linear-gradient(135deg, #23292f 0%, #4a90e2 100%); }
    .stat-icon.bnb { background: linear-gradient(135deg, #f3ba2f 0%, #f7d794 100%); }
    .stat-icon.doge { background: linear-gradient(135deg, #c2a633 0%, #d4c17d 100%); }

    .stat-title {
      font-size: 14px;
      font-weight: 700;
      color: #2d3748;
    }

    .stat-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stat-badge.top-profit {
      background: #38a169;
      color: white;
    }

    .stat-badge.top-loss {
      background: #e53e3e;
      color: white;
    }

    .stat-metrics {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1fr;
      gap: 6px;
      margin-bottom: 10px;
    }

    .stat-metric {
      text-align: center;
    }

    .stat-metric-label {
      font-size: 9px;
      color: #718096;
      margin-bottom: 3px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stat-metric-value {
      font-size: 12px;
      font-weight: 700;
      color: #2d3748;
    }

    .stat-pnl {
      text-align: center;
      padding: 8px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 800;
    }

    .stat-pnl.positive {
      background: #c6f6d5;
      color: #22543d;
    }

    .stat-pnl.negative {
      background: #fed7d7;
      color: #742a2a;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ LONG/SHORT */
    .long-short-stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-top: 20px;
    }

    @media (max-width: 768px) {
      .long-short-stats-grid {
        grid-template-columns: 1fr;
      }
    }

    .long-short-card {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border-radius: 16px;
      padding: 25px;
      border-left: 6px solid #0ea5e9;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      min-height: 200px;
    }

    .long-short-card.long {
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
      border-left-color: #22c55e;
    }

    .long-short-card.short {
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      border-left-color: #ef4444;
    }

    .long-short-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .long-short-icon {
      font-size: 24px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    .long-short-icon.long {
      background: #22c55e;
      color: white;
    }

    .long-short-icon.short {
      background: #ef4444;
      color: white;
    }

    .long-short-title {
      font-size: 18px;
      font-weight: 700;
      color: #1f2937;
    }

    .long-short-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }

    .long-short-stat {
      text-align: center;
      padding: 10px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 8px;
    }

    .long-short-stat-label {
      font-size: 12px;
      color: #6b7280;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 5px;
    }

    .long-short-stat-value {
      font-size: 16px;
      font-weight: 800;
      color: #1f2937;
    }

    .long-short-stat-value.positive {
      color: #059669;
    }

    .long-short-stat-value.negative {
      color: #dc2626;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ */
    .losses-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 15px;
      margin-top: 20px;
    }

    @media (max-width: 1200px) {
      .losses-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 768px) {
      .losses-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 480px) {
      .losses-grid {
        grid-template-columns: 1fr;
      }
    }

    .loss-card {
      background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
      border-radius: 12px;
      padding: 15px;
      border-left: 4px solid #f44336;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      min-height: 140px;
    }

    .loss-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(244, 67, 54, 0.3);
    }

    .loss-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .loss-icon {
      width: 32px;
      height: 32px;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
      color: white;
      font-weight: bold;
    }

    .loss-title {
      font-size: 14px;
      font-weight: 600;
      color: #333;
    }

    .loss-metrics {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 6px;
      margin-bottom: 10px;
    }

    .loss-metric-label {
      font-size: 9px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .loss-metric-value {
      font-size: 12px;
      font-weight: 600;
      color: #333;
    }

    .loss-amount {
      padding: 8px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      text-align: center;
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
      color: white;
    }

    .loss-badge {
      position: absolute;
      top: 8px;
      right: 8px;
      background: #f44336;
      color: white;
      padding: 2px 6px;
      border-radius: 10px;
      font-size: 8px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .stat-pnl.neutral {
      background: #e2e8f0;
      color: #4a5568;
    }

    /* –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
    .overall-stats {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      color: white;
      text-align: center;
    }

    .overall-stats h3 {
      margin: 0 0 15px 0;
      font-size: 18px;
      font-weight: 700;
    }

    .overall-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 15px;
    }

    .overall-metric {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 12px;
      backdrop-filter: blur(10px);
    }

    .overall-metric-label {
      font-size: 11px;
      opacity: 0.8;
      margin-bottom: 5px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .overall-metric-value {
      font-size: 16px;
      font-weight: 700;
    }

    .positions-section {
      margin-top: 30px;
    }

    .crypto-grid {
      margin-top: 30px;
      margin-bottom: 30px;
    }

    .strategy-info {
      margin-top: 40px;
      margin-bottom: 40px;
    }

    .header {
      margin-bottom: 30px;
    }

    .container {
      padding-bottom: 40px;
    }

    .positions-section h2, .history-section h2 {
      color: #2d3748;
      margin-bottom: 20px;
      font-size: 1.8rem;
      text-align: center;
    }

    .positions-container, .history-container {
      min-height: 200px;
    }

    .no-positions, .no-history {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px;
      text-align: center;
      color: #718096;
    }

    .no-positions-icon, .no-history-icon {
      font-size: 48px;
      margin-bottom: 15px;
      opacity: 0.5;
    }

    .no-positions-text, .no-history-text {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #4a5568;
    }

    .no-positions-desc, .no-history-desc {
      font-size: 14px;
      opacity: 0.8;
    }

    /* –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–∑–∏—Ü–∏–π */
    .position-card {
      background: #f8fafc;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
      border-left: 4px solid #4299e1;
      transition: all 0.3s ease;
    }

    .position-card.long {
      border-left-color: #48bb78;
    }

    .position-card.short {
      border-left-color: #f56565;
    }

    .position-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .position-symbol {
      font-size: 18px;
      font-weight: 700;
      color: #2d3748;
    }

    .position-direction {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .position-direction.long {
      background: #c6f6d5;
      color: #22543d;
    }

    .position-direction.short {
      background: #fed7d7;
      color: #742a2a;
    }

    .position-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-bottom: 15px;
    }

    .position-detail {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .position-detail-label {
      font-size: 12px;
      color: #718096;
      font-weight: 500;
    }

    .position-detail-value {
      font-size: 14px;
      font-weight: 600;
      color: #2d3748;
    }

    .position-pnl {
      text-align: center;
      padding: 10px;
      border-radius: 8px;
      font-weight: 700;
      font-size: 16px;
    }

    .position-pnl.positive {
      background: #c6f6d5;
      color: #22543d;
    }

    .position-pnl.negative {
      background: #fed7d7;
      color: #742a2a;
    }

    .position-pnl.neutral {
      background: #e2e8f0;
      color: #718096;
    }

    /* –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∏ */
    .position-planned-pnl {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      padding: 8px 12px;
      background: #f8fafc;
      border-radius: 6px;
      border: 1px solid #e2e8f0;
    }

    .planned-tp, .planned-sl {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }

    .planned-label {
      font-size: 11px;
      color: #718096;
      font-weight: 500;
    }

    .planned-value {
      font-size: 13px;
      font-weight: 700;
    }

    .planned-value.positive {
      color: #48bb78;
    }

    .planned-value.negative {
      color: #f56565;
    }

    /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
    .position-actions {
      margin-top: 15px;
      text-align: center;
    }

    .close-btn {
      background: linear-gradient(135deg, #f56565, #e53e3e);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(245, 101, 101, 0.3);
    }

    .close-btn:hover {
      background: linear-gradient(135deg, #e53e3e, #c53030);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(245, 101, 101, 0.4);
    }

    .close-btn:active {
      transform: translateY(0);
      box-shadow: 0 2px 6px rgba(245, 101, 101, 0.3);
    }

    /* –°–µ—Ç–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫ RSI */
    .positions-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    @media (max-width: 1400px) {
      .positions-container {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 1000px) {
      .positions-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 600px) {
      .positions-container {
        grid-template-columns: 1fr;
      }
    }

    /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ */
    .history-stats {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
      padding: 15px;
      background: #f8fafc;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .stat-label {
      font-size: 12px;
      color: #718096;
      font-weight: 500;
    }

    .stat-value {
      font-size: 16px;
      font-weight: 700;
      color: #2d3748;
    }

    .stat-value.positive {
      color: #48bb78;
    }

    .stat-value.negative {
      color: #f56565;
    }

    /* –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—Ä–∏–∏ —Å–¥–µ–ª–æ–∫ */
    .history-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .history-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: #f8fafc;
      border-radius: 8px;
      border-left: 4px solid #4299e1;
      transition: all 0.2s ease;
    }

    .history-item:hover {
      background: #edf2f7;
      transform: translateX(2px);
    }

    .history-item.long {
      border-left-color: #48bb78;
    }

    .history-item.short {
      border-left-color: #f56565;
    }

    .history-item.profit {
      background: #f0fff4;
    }

    .history-item.loss {
      background: #fff5f5;
    }

    .history-main {
      display: flex;
      align-items: center;
      gap: 12px;
      flex: 1;
    }

    .history-symbol {
      font-weight: 700;
      font-size: 14px;
      color: #2d3748;
      min-width: 80px;
    }

    .history-direction {
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .history-direction.long {
      background: #c6f6d5;
      color: #22543d;
    }

    .history-direction.short {
      background: #fed7d7;
      color: #742a2a;
    }

    .history-prices {
      display: flex;
      flex-direction: column;
      gap: 2px;
      font-size: 12px;
      color: #718096;
    }

    .history-pnl {
      text-align: right;
      font-weight: 700;
      font-size: 14px;
    }

    .history-pnl.positive {
      color: #48bb78;
    }

    .history-pnl.negative {
      color: #f56565;
    }

    .history-time {
      font-size: 11px;
      color: #a0aec0;
      margin-top: 2px;
    }

    /* –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-top: 20px;
      padding: 15px;
    }

    .page-btn {
      background: #4299e1;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .page-btn:hover:not(:disabled) {
      background: #3182ce;
      transform: translateY(-1px);
    }

    .page-btn:disabled {
      background: #e2e8f0;
      color: #a0aec0;
      cursor: not-allowed;
    }

    .page-info {
      font-size: 14px;
      color: #718096;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <!-- –ë—É—Ä–≥–µ—Ä–Ω–æ–µ –º–µ–Ω—é -->
  <div class="burger-menu">
    <button class="burger-button" id="burgerButton">
      <div class="burger-line"></div>
      <div class="burger-line"></div>
      <div class="burger-line"></div>
    </button>
    
    <div class="burger-menu-content" id="burgerMenuContent">
      <div class="burger-menu-header">
        <div class="burger-menu-title">üéØ Crypto Bot</div>
        <div class="burger-menu-subtitle">–¢–æ—Ä–≥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</div>
      </div>
      
      <div class="burger-menu-items">
        <a href="/" class="burger-menu-item">
          <div class="burger-menu-icon">üè†</div>
          <div>
            <div class="burger-menu-text">–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</div>
            <div class="burger-menu-desc">–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è TP/SL</div>
          </div>
        </a>
        
        <a href="/rsi" class="burger-menu-item">
          <div class="burger-menu-icon">üìä</div>
          <div>
            <div class="burger-menu-text">RSI —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</div>
            <div class="burger-menu-desc">–≠–∫—Å—Ç—Ä–µ–º—É–º—ã RSI</div>
          </div>
        </a>
        
        <a href="/rsi-long" class="burger-menu-item active">
          <div class="burger-menu-icon">üìà</div>
          <div>
            <div class="burger-menu-text">RSI Long Only</div>
            <div class="burger-menu-desc">–¢–æ–ª—å–∫–æ –ª–æ–Ω–≥–∏</div>
          </div>
        </a>
        
        <a href="/rsi-40-50" class="burger-menu-item">
          <div class="burger-menu-icon">üìä</div>
          <div>
            <div class="burger-menu-text">RSI 40-50</div>
            <div class="burger-menu-desc">LONG/SHORT</div>
          </div>
        </a>
        
        <a href="/rsi-max" class="burger-menu-item">
          <div class="burger-menu-icon">üöÄ</div>
          <div>
            <div class="burger-menu-text">RSI Max</div>
            <div class="burger-menu-desc">–ë–æ–ª—å—à–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è</div>
          </div>
        </a>
        
        <div class="burger-menu-divider"></div>
        
        <a href="#" class="burger-menu-item">
          <div class="burger-menu-icon">‚öôÔ∏è</div>
          <div>
            <div class="burger-menu-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            <div class="burger-menu-desc">–°–∫–æ—Ä–æ...</div>
          </div>
        </a>
        
        <a href="#" class="burger-menu-item">
          <div class="burger-menu-icon">üìà</div>
          <div>
            <div class="burger-menu-text">MACD —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</div>
            <div class="burger-menu-desc">–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</div>
          </div>
        </a>
      </div>
    </div>
  </div>

  <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–µ–Ω—é -->
  <div class="horizontal-menu">
    <div class="menu-left">
      <button class="burger-icon" id="rsiBurgerButton">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <div class="logo">
        <span class="logo-icon">üìä</span>
        <span class="logo-text">RSI Strategy</span>
      </div>
    </div>
    
    <div class="menu-center">
      <div class="balance-info">
        <div class="balance-item">
          <span class="balance-label">–ë–∞–ª–∞–Ω—Å:</span>
          <span class="balance-value" id="rsiBalance">$1,000.00</span>
        </div>
        <div class="balance-item">
          <span class="balance-label">–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL:</span>
          <span class="balance-value" id="rsiRealizedPnL">$0.00</span>
        </div>
        <div class="balance-item">
          <span class="balance-label">–ù–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL:</span>
          <span class="balance-value" id="rsiUnrealizedPnL">$0.00</span>
        </div>
        <div class="balance-item">
          <span class="balance-label">–°–¥–µ–ª–æ–∫:</span>
          <span class="balance-value" id="rsiDealsCount">0</span>
        </div>
        <div class="balance-item">
          <span class="balance-label">Win Rate:</span>
          <span class="balance-value" id="rsiWinRate">0%</span>
        </div>
        <div class="balance-item">
          <span class="balance-label">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:</span>
          <span class="balance-value" id="rsiLocked">$0.00</span>
        </div>
      </div>
    </div>
    
    <div class="menu-right">
      <div class="connection-status">
        <div class="status-dot" id="rsiConnectionStatus"></div>
        <span id="rsiConnectionText">–ü–æ–¥–∫–ª—é—á–µ–Ω–æ</span>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="header">
      <h1>üìà RSI Long Only Strategy</h1>
      <p>–¢–æ—Ä–≥–æ–≤–ª—è —Ç–æ–ª—å–∫–æ LONG –ø–æ–∑–∏—Ü–∏—è–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ RSI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ (3-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–∞–π–º—Ñ—Ä–µ–π–º)</p>
      <div class="strategy-badge">üü¢ –¢–û–õ–¨–ö–û –õ–û–ù–ì–ò</div>
    </div>

    <!-- –û—Ç–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏ RSI -->
    <div class="positions-section">
      <h2>üìà –û—Ç–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏ RSI</h2>
      <div class="positions-container" id="rsiPositionsContainer">
        <div class="no-positions">
          <div class="no-positions-icon">üìä</div>
          <div class="no-positions-text">–ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫</div>
          <div class="no-positions-desc">–°–¥–µ–ª–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –ø—Ä–∏ RSI ‚â§ 25 (—Ç–æ–ª—å–∫–æ LONG –ø–æ–∑–∏—Ü–∏–∏)</div>
        </div>
      </div>
    </div>

    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–µ–π –ø–æ –º–æ–Ω–µ—Ç–∞–º -->
    <div class="trading-controls-section">
      <h2>üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–µ–π</h2>
      <div class="trading-controls">
        <div class="control-header">
          <span>–í–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é –ø–æ –º–æ–Ω–µ—Ç–∞–º:</span>
          <div class="control-buttons">
            <button id="enableAllCoins" class="control-btn enable">–í–∫–ª—é—á–∏—Ç—å –≤—Å–µ</button>
            <button id="disableAllCoins" class="control-btn disable">–û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ</button>
          </div>
        </div>
        <div class="coins-toggle-grid" id="coinsToggleGrid">
          <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ –º–æ–Ω–µ—Ç –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
      </div>
    </div>

    <div class="crypto-grid" id="cryptoGrid">
      <!-- –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>


    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–Ω–µ—Ç–∞–º -->
    <div class="crypto-stats-section">
      <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–Ω–µ—Ç–∞–º</h2>
      
      <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
      <div class="overall-stats" id="overallStats">
        <!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
      
      <div class="stats-grid" id="cryptoStatsGrid">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ LONG/SHORT -->
    <div class="long-short-stats-section">
      <h2>üìàüìâ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ LONG/SHORT</h2>
      <div class="long-short-stats-grid" id="longShortStatsGrid">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ LONG/SHORT –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
    </div>

    <!-- –£–±—ã—Ç–æ—á–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –ø–æ –º–æ–Ω–µ—Ç–∞–º -->
    <div class="losses-section">
      <h2>üìâ –£–±—ã—Ç–æ—á–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –ø–æ –º–æ–Ω–µ—Ç–∞–º</h2>
      <div class="losses-grid" id="lossesGrid">
        <!-- –£–±—ã—Ç–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
    </div>

    <!-- –ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫ RSI -->
    <div class="history-section">
      <h2>üìã –ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫ RSI</h2>
      <div class="history-stats">
        <div class="stat-item">
          <span class="stat-label">–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫:</span>
          <span class="stat-value" id="rsiTotalDeals">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">–ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö:</span>
          <span class="stat-value positive" id="rsiWinningDeals">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">–£–±—ã—Ç–æ—á–Ω—ã—Ö:</span>
          <span class="stat-value negative" id="rsiLosingDeals">0</span>
        </div>
        <div class="stat-item">
          <span class="stat-label">Win Rate:</span>
          <span class="stat-value" id="rsiHistoryWinRate">0%</span>
        </div>
      </div>
      <div class="history-container" id="rsiHistoryContainer">
        <div class="no-history">
          <div class="no-history-icon">üìù</div>
          <div class="no-history-text">–ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫ –ø—É—Å—Ç–∞</div>
          <div class="no-history-desc">–ó–∞–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å</div>
        </div>
      </div>
      <div class="pagination" id="rsiPagination" style="display: none;">
        <button class="page-btn" id="rsiPrevPage" onclick="changeRSIPage(-1)">‚Üê –ù–∞–∑–∞–¥</button>
        <span class="page-info" id="rsiPageInfo">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
        <button class="page-btn" id="rsiNextPage" onclick="changeRSIPage(1)">–í–ø–µ—Ä–µ–¥ ‚Üí</button>
      </div>
      <div class="data-controls" style="text-align: center; margin-top: 20px;">
        <div style="margin-bottom: 10px; font-size: 12px; color: #718096;">
          üíæ –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
        </div>
        <button class="clear-btn" onclick="clearRSIData()" style="background: #f56565; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">
          üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ RSI Long
        </button>
      </div>
    </div>

    <div class="strategy-info">
      <h2>üéØ –ü—Ä–∞–≤–∏–ª–∞ RSI —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</h2>
      <div class="strategy-rules">
        <div class="rule-card long">
          <div class="rule-title">üü¢ LONG —Å–∏–≥–Ω–∞–ª</div>
          <div class="rule-desc">
          RSI ‚â§ 25 (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)<br>
            –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏<br>
          TP: 0.5%, SL: 0.25%<br>
          <strong>–°—É–º–º–∞ —Å–¥–µ–ª–∫–∏: $100</strong><br>
          <strong>–°—Ä–µ–¥—Å—Ç–≤–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è</strong>
          </div>
        </div>
        <div class="rule-card short disabled">
          <div class="rule-title">üî¥ SHORT —Å–∏–≥–Ω–∞–ª</div>
          <div class="rule-desc">
            <span style="color: #999; text-decoration: line-through;">RSI ‚â• 69 (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å)</span><br>
            <span style="color: #999;">–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏</span><br>
            <span style="color: #999;">TP: 0.37%, SL: 0.25%</span><br>
            <strong style="color: #999;">–°—É–º–º–∞ —Å–¥–µ–ª–∫–∏: $100</strong><br>
            <strong style="color: #999;">–°—Ä–µ–¥—Å—Ç–≤–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è</strong><br>
            <span style="color: #ef4444; font-weight: bold;">‚ùå –û–¢–ö–õ–Æ–ß–ï–ù–û</span>
          </div>
        </div>
        <div class="rule-card">
          <div class="rule-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
          <div class="rule-desc">
            –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏: $100<br>
            –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å: $1000<br>
            –¢–∞–π–º—Ñ—Ä–µ–π–º: 3 –º–∏–Ω—É—Ç—ã<br>
            R:R = 1:2.23<br>
            –ë–µ–∑ –∫–æ–º–∏—Å—Å–∏–π (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // –ë—É—Ä–≥–µ—Ä–Ω–æ–µ –º–µ–Ω—é
    document.addEventListener('DOMContentLoaded', function() {
      const burgerButton = document.getElementById('burgerButton');
      const rsiBurgerButton = document.getElementById('rsiBurgerButton');
      const burgerMenuContent = document.getElementById('burgerMenuContent');
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Å—Ç–∞—Ä–æ–π –∫–Ω–æ–ø–∫–∏ –±—É—Ä–≥–µ—Ä–∞
      if (burgerButton) {
      burgerButton.addEventListener('click', function() {
        burgerButton.classList.toggle('active');
        burgerMenuContent.classList.toggle('active');
      });
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º –º–µ–Ω—é
      if (rsiBurgerButton) {
        rsiBurgerButton.addEventListener('click', function(e) {
          e.stopPropagation();
          burgerMenuContent.classList.toggle('active');
        });
      }
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
      document.addEventListener('click', function(event) {
        const isBurgerClick = burgerButton && burgerButton.contains(event.target);
        const isRsiBurgerClick = rsiBurgerButton && rsiBurgerButton.contains(event.target);
        const isMenuClick = burgerMenuContent && burgerMenuContent.contains(event.target);
        
        if (!isBurgerClick && !isRsiBurgerClick && !isMenuClick) {
          if (burgerButton) burgerButton.classList.remove('active');
          if (burgerMenuContent) burgerMenuContent.classList.remove('active');
        }
      });
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ø—É–Ω–∫—Ç –º–µ–Ω—é
      const menuItems = document.querySelectorAll('.burger-menu-item');
      menuItems.forEach(item => {
        item.addEventListener('click', function() {
          if (burgerButton) burgerButton.classList.remove('active');
          if (burgerMenuContent) burgerMenuContent.classList.remove('active');
        });
      });
    });

    // –î–∞–Ω–Ω—ã–µ –¥–ª—è RSI —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
    let lastPrices = {};
    let rsiData = {};
    let openPositions = [];
    let closedDeals = [];
    let currentBalance = 1000; // –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
    let realizedPnL = 0;
    let totalCommissions = 0;
    let cooldownSymbols = {};
    
    // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è RSI —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
    const FUTURES_TAKER_FEE = 0.0004; // 0.04% –∫–æ–º–∏—Å—Å–∏—è taker
    const POSITION_SIZE_USD = 100; // –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö
    const RSI_LONG_THRESHOLD = 25; // RSI –¥–ª—è LONG (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)
    const RSI_SHORT_THRESHOLD = 100; // RSI –¥–ª—è SHORT (–æ—Ç–∫–ª—é—á–µ–Ω–æ - —Ç–æ–ª—å–∫–æ –ª–æ–Ω–≥–∏)
    
    // RSI —Ç–æ—Ä–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ—Ç –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ rsi.html)
    let rsiOpenPositions = [];
    let rsiClosedDeals = [];
    let rsiRealizedPnL = 0; // –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL (–±–∞–ª–∞–Ω—Å = 1000 + rsiRealizedPnL)
    let rsiTotalCommissions = 0;
    let rsiCooldownSymbols = {};
    let rsiLastPrices = {};
    
    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–µ–π –ø–æ –º–æ–Ω–µ—Ç–∞–º
    let enabledCoins = {
      'BTCUSDT': true,
      'ETHUSDT': true,
      'SOLUSDT': true,
      'XRPUSDT': true,
      'BNBUSDT': true,
      'DOGEUSDT': true
    };
    
    // –ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
    let rsiCurrentPage = 1;
    const rsiDealsPerPage = 20;
    
    // WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
    let ws = null;
    
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö RSI –≤ localStorage
    function saveRSIData() {
      try {
        const data = {
          openPositions: rsiOpenPositions,
          closedDeals: rsiClosedDeals,
          realizedPnL: rsiRealizedPnL,
          totalCommissions: rsiTotalCommissions,
          cooldownSymbols: rsiCooldownSymbols,
          lastPrices: rsiLastPrices,
          currentPage: rsiCurrentPage,
          enabledCoins: enabledCoins,
          lastSaved: Date.now()
        };
        localStorage.setItem('rsiLongTradingData', JSON.stringify(data));
        console.log(`üíæ RSI –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: ${rsiOpenPositions.length} –ø–æ–∑–∏—Ü–∏–π, ${rsiClosedDeals.length} —Å–¥–µ–ª–æ–∫`);
      } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è RSI –¥–∞–Ω–Ω—ã—Ö:', error);
      }
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö RSI –∏–∑ localStorage
    function loadRSIData() {
      try {
        const savedData = localStorage.getItem('rsiLongTradingData');
        if (savedData) {
          const data = JSON.parse(savedData);
          rsiOpenPositions = data.openPositions || [];
          rsiClosedDeals = data.closedDeals || [];
          rsiRealizedPnL = data.realizedPnL || 0;
          rsiTotalCommissions = data.totalCommissions || 0;
          rsiCooldownSymbols = data.cooldownSymbols || {};
          rsiLastPrices = data.lastPrices || {};
          rsiCurrentPage = data.currentPage || 1;
          enabledCoins = data.enabledCoins || {
            'BTCUSDT': true,
            'ETHUSDT': true,
            'SOLUSDT': true,
            'XRPUSDT': true,
            'BNBUSDT': true,
            'DOGEUSDT': true
          };
          
          console.log('üìÅ RSI –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ localStorage');
          console.log(`   –û—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π: ${rsiOpenPositions.length}`);
          console.log(`   –ó–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫: ${rsiClosedDeals.length}`);
          console.log(`   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL: $${rsiRealizedPnL.toFixed(2)}`);
          
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–¥–µ–ª–∫–∏
          if (rsiClosedDeals.length > 0) {
            const lastDeal = rsiClosedDeals[rsiClosedDeals.length - 1];
            console.log(`   –ü–æ—Å–ª–µ–¥–Ω—è—è —Å–¥–µ–ª–∫–∞: ${lastDeal.symbol} ${lastDeal.direction} PnL: $${lastDeal.netPnL.toFixed(2)}`);
          }
        }
      } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ RSI –¥–∞–Ω–Ω—ã—Ö:', error);
      }
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', function() {
      loadRSIData(); // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
      initializeCryptoGrid();
      connectWebSocket();
      updateRSIBalance();
      updateRSIPositions();
      updateRSIHistory();
      updateCryptoStats();
      updateLongShortStats();
      updateLossesStats();
      initializeTradingControls();
    });

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏/–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('beforeunload', function() {
      saveRSIData();
    });

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞ (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫)
    window.addEventListener('blur', function() {
      saveRSIData();
    });

    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    setInterval(function() {
      saveRSIData();
    }, 5000);

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ RSI
    function updateRSIBalance() {
      const unrealizedPnL = calculateUnrealizedPnL();
      const totalPnL = rsiRealizedPnL + unrealizedPnL;
      
      // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –≤ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö
      const lockedInPositions = rsiOpenPositions.reduce((total, pos) => total + pos.amountUSD, 0);
      
      // –î–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å = –Ω–∞—á–∞–ª—å–Ω—ã–π + —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
      const availableBalance = 1000 + rsiRealizedPnL - lockedInPositions;
      
      // Win Rate –ø–æ netPnL (—É—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏)
      const winRate = rsiClosedDeals.length > 0 
        ? (rsiClosedDeals.filter(deal => deal.netPnL > 0).length / rsiClosedDeals.length * 100).toFixed(1)
        : 0;

      document.getElementById('rsiBalance').textContent = `$${availableBalance.toFixed(2)}`;
      
      // –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL
      const realizedPnLElement = document.getElementById('rsiRealizedPnL');
      realizedPnLElement.textContent = `${rsiRealizedPnL >= 0 ? '+' : ''}$${rsiRealizedPnL.toFixed(2)}`;
      realizedPnLElement.className = `balance-value ${rsiRealizedPnL >= 0 ? 'positive' : 'negative'}`;
      
      // –ù–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL
      const unrealizedPnLElement = document.getElementById('rsiUnrealizedPnL');
      unrealizedPnLElement.textContent = `${unrealizedPnL >= 0 ? '+' : ''}$${unrealizedPnL.toFixed(2)}`;
      unrealizedPnLElement.className = `balance-value ${unrealizedPnL >= 0 ? 'positive' : 'negative'}`;
      
      document.getElementById('rsiDealsCount').textContent = rsiClosedDeals.length;
      document.getElementById('rsiWinRate').textContent = `${winRate}%`;
      document.getElementById('rsiLocked').textContent = `$${lockedInPositions.toFixed(2)}`;
      
      // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
      console.log(`üí∞ –ë–∞–ª–∞–Ω—Å RSI: –î–æ—Å—Ç—É–ø–Ω–æ: $${availableBalance.toFixed(2)}, –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π: $${rsiRealizedPnL.toFixed(2)}, –ù–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π: $${unrealizedPnL.toFixed(2)}, –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: $${lockedInPositions.toFixed(2)}`);
    }

    // –†–∞—Å—á–µ—Ç –Ω–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ PnL
    function calculateUnrealizedPnL() {
      let totalUnrealized = 0;
      rsiOpenPositions.forEach(position => {
        const currentPrice = rsiLastPrices[position.symbol] || position.entryPrice;
        const pnl = position.direction === 'LONG' 
          ? (currentPrice - position.entryPrice) * position.volume
          : (position.entryPrice - currentPrice) * position.volume;
        totalUnrealized += pnl;
        
        console.log(`üìä ${position.symbol} ${position.direction}: –í—Ö–æ–¥: $${position.entryPrice.toFixed(4)}, –¢–µ–∫—É—â–∞—è: $${currentPrice.toFixed(4)}, PnL: $${pnl.toFixed(2)}`);
      });
      console.log(`üìà –û–±—â–∏–π –Ω–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL: $${totalUnrealized.toFixed(2)}`);
      return totalUnrealized;
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
    function updateRSIPositions() {
      const container = document.getElementById('rsiPositionsContainer');
      
      if (rsiOpenPositions.length === 0) {
        container.innerHTML = `
          <div class="no-positions">
            <div class="no-positions-icon">üìä</div>
            <div class="no-positions-text">–ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫</div>
            <div class="no-positions-desc">–°–¥–µ–ª–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –ø—Ä–∏ RSI ‚â§ 25 (—Ç–æ–ª—å–∫–æ LONG –ø–æ–∑–∏—Ü–∏–∏)</div>
          </div>
        `;
        return;
      }

      container.innerHTML = rsiOpenPositions.map(position => {
        const currentPrice = rsiLastPrices[position.symbol] || position.entryPrice;
        const pnl = position.direction === 'LONG' 
          ? (currentPrice - position.entryPrice) * position.volume
          : (position.entryPrice - currentPrice) * position.volume;
        const pnlPercent = (pnl / position.amountUSD) * 100;

        return `
          <div class="position-card ${position.direction.toLowerCase()}">
            <div class="position-header">
              <div class="position-symbol">${position.symbol}</div>
              <div class="position-direction ${position.direction.toLowerCase()}">${position.direction}</div>
            </div>
            <div class="position-details">
              <div class="position-detail">
                <div class="position-detail-label">–°—É–º–º–∞ —Å–¥–µ–ª–∫–∏</div>
                <div class="position-detail-value">$${position.amountUSD.toFixed(2)}</div>
              </div>
              <div class="position-detail">
                <div class="position-detail-label">–í—Ö–æ–¥</div>
                <div class="position-detail-value">$${position.entryPrice.toFixed(4)}</div>
              </div>
              <div class="position-detail">
                <div class="position-detail-label">–¢–µ–∫—É—â–∞—è</div>
                <div class="position-detail-value">$${currentPrice.toFixed(4)}</div>
              </div>
              <div class="position-detail">
                <div class="position-detail-label">–û–±—ä–µ–º</div>
                <div class="position-detail-value">${position.volume.toFixed(6)}</div>
              </div>
              <div class="position-detail">
                <div class="position-detail-label">TP</div>
                <div class="position-detail-value">$${position.tpPrice.toFixed(4)}</div>
              </div>
              <div class="position-detail">
                <div class="position-detail-label">SL</div>
                <div class="position-detail-value">$${position.slPrice.toFixed(4)}</div>
              </div>
            </div>
            <div class="position-planned-pnl">
              <div class="planned-tp">
                <span class="planned-label">–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π TP:</span>
                <span class="planned-value positive">+$${(position.amountUSD * 0.37 / 100).toFixed(2)}</span>
              </div>
              <div class="planned-sl">
                <span class="planned-label">–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π SL:</span>
                <span class="planned-value negative">-$${(position.amountUSD * 0.25 / 100).toFixed(2)}</span>
              </div>
            </div>
            <div class="position-pnl ${pnl >= 0 ? 'positive' : 'negative'}">
              ${pnl >= 0 ? '+' : ''}$${pnl.toFixed(2)} (${pnlPercent >= 0 ? '+' : ''}${pnlPercent.toFixed(2)}%)
            </div>
            <div class="position-actions">
              <button class="close-btn" onclick="closeRSIPositionByMarket(${position.id})" style="background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease;">
                ‚ö° –ú–ì–ù–û–í–ï–ù–ù–û –ó–ê–ö–†–´–¢–¨
              </button>
            </div>
          </div>
        `;
      }).join('');
    }
    
    function initializeCryptoGrid() {
      const cryptos = [
        { symbol: 'BTCUSDT', name: 'Bitcoin', icon: '‚Çø' },
        { symbol: 'ETHUSDT', name: 'Ethereum', icon: 'Œû' },
        { symbol: 'SOLUSDT', name: 'Solana', icon: '‚óé' },
        { symbol: 'XRPUSDT', name: 'Ripple', icon: 'X' },
        { symbol: 'BNBUSDT', name: 'Binance Coin', icon: 'B' },
        { symbol: 'DOGEUSDT', name: 'Dogecoin', icon: 'ƒê' }
      ];
      
      const grid = document.getElementById('cryptoGrid');
      grid.innerHTML = '';
      
      cryptos.forEach(crypto => {
        const card = createCryptoCard(crypto);
        grid.appendChild(card);
      });
    }
    
    function createCryptoCard(crypto) {
      const card = document.createElement('div');
      card.className = 'crypto-card';
      card.id = `card-${crypto.symbol}`;
      
      const iconClass = crypto.symbol.toLowerCase().replace('usdt', '');
      
      card.innerHTML = `
        <div class="header-card">
          <div class="icon ${iconClass}">${crypto.icon}</div>
          <div>
            <div class="title">${crypto.name}</div>
            <div class="subtitle">${crypto.symbol}/USDT Futures</div>
          </div>
        </div>
        
        <div class="price-display">
          <div class="price" id="price-${crypto.symbol}">$0.00000</div>
          <div class="change" id="change-${crypto.symbol}">+0.00%</div>
        </div>
        
        <div class="rsi-indicator">
          <div class="rsi-value neutral" id="rsi-${crypto.symbol}">50.0</div>
          <div class="rsi-label">RSI (14)</div>
        </div>
        
        <div class="rsi-signal neutral" id="signal-${crypto.symbol}">
          –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ
        </div>
        
        <div class="stats">
          <div class="stat">
            <div>24h High</div>
            <div class="stat-value" id="high-${crypto.symbol}">$0.00000</div>
          </div>
          <div class="stat">
            <div>24h Low</div>
            <div class="stat-value" id="low-${crypto.symbol}">$0.00000</div>
          </div>
        </div>
        
        <div class="connection-status">
          <div class="status-dot"></div>
          <span>–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ Binance Futures</span>
        </div>
      `;
      
      return card;
    }
    
    function connectWebSocket() {
      const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
      const wsUrl = `${protocol}//${window.location.host}`;
      
      ws = new WebSocket(wsUrl);
      
      ws.onopen = function() {
        console.log('üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ WebSocket —Å–µ—Ä–≤–µ—Ä—É');
      };
      
    ws.onmessage = function(event) {
      try {
        const message = JSON.parse(event.data);
        
        if (message.type === 'prices') {
          updatePrices(message.data);
        } else if (message.type === 'analytics3m') {
          updateAnalytics3m(message.data);
        }
      } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
      }
    };
      
      ws.onclose = function() {
        console.log('üîå WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ');
        setTimeout(connectWebSocket, 5000);
      };
      
      ws.onerror = function(error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ WebSocket:', error);
      };
    }
    
    function updatePrices(data) {
      Object.keys(data).forEach(symbol => {
        if (data[symbol] && data[symbol].futures) {
          // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—ã –¥–ª—è RSI —Ç–æ—Ä–≥–æ–≤–ª–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
          const newPrice = data[symbol].futures.price;
          const oldPrice = rsiLastPrices[symbol];
          
          // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ü–µ–Ω—ã
          if (newPrice && newPrice > 0 && newPrice < 1000000) { // –†–∞–∑—É–º–Ω—ã–µ –ø—Ä–µ–¥–µ–ª—ã
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ —Ä–µ–∑–∫–∏–µ —Å–∫–∞—á–∫–∏ (–±–æ–ª–µ–µ 10% –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞ —Å–µ–∫—É–Ω–¥—É)
            if (oldPrice && Math.abs(newPrice - oldPrice) / oldPrice > 0.1) {
              console.log(`‚ö†Ô∏è –†–ï–ó–ö–ò–ô –°–ö–ê–ß–û–ö –¶–ï–ù–´ ${symbol}: ${oldPrice.toFixed(4)} ‚Üí ${newPrice.toFixed(4)}`);
              console.log(`   –ò–∑–º–µ–Ω–µ–Ω–∏–µ: ${((newPrice - oldPrice) / oldPrice * 100).toFixed(2)}%`);
              console.log(`   –í—Ä–µ–º—è: ${new Date().toLocaleTimeString()}`);
              
              // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–º —Ä–µ–∑–∫–∏–º –¥–≤–∏–∂–µ–Ω–∏–µ–º —Ä—ã–Ω–∫–∞
              // –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö (–¥–æ 20%), –ø—Ä–∏–Ω–∏–º–∞–µ–º
              if (Math.abs(newPrice - oldPrice) / oldPrice <= 0.2) {
                console.log(`‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ–º —Ä–µ–∑–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Ä—ã–Ω–∫–∞ –¥–ª—è ${symbol}`);
                rsiLastPrices[symbol] = newPrice;
                lastPrices[symbol] = newPrice;
              } else {
                console.log(`‚ùå –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è ${symbol}`);
                return;
              }
            } else {
              // –û–±—ã—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã
              rsiLastPrices[symbol] = newPrice;
              lastPrices[symbol] = newPrice;
            }
          } else {
            console.log(`‚ùå –ù–ï–ö–û–†–†–ï–ö–¢–ù–ê–Ø –¶–ï–ù–ê ${symbol}: ${newPrice}`);
          }
          
          // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ü–µ–Ω (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∑–∫–∏—Ö –¥–≤–∏–∂–µ–Ω–∏—è—Ö)
          if ((symbol === 'BTCUSDT' || symbol === 'BNBUSDT' || symbol === 'ETHUSDT') && 
              oldPrice && Math.abs(newPrice - oldPrice) / oldPrice > 0.05) {
            console.log(`üîç –û–¢–õ–ê–î–ö–ê –†–ï–ó–ö–û–ì–û –î–í–ò–ñ–ï–ù–ò–Ø ${symbol}:`);
            console.log(`   –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞: $${oldPrice.toFixed(4)}`);
            console.log(`   –ù–æ–≤–∞—è —Ü–µ–Ω–∞: $${newPrice.toFixed(4)}`);
            console.log(`   –ò–∑–º–µ–Ω–µ–Ω–∏–µ: ${((newPrice - oldPrice) / oldPrice * 100).toFixed(2)}%`);
            console.log(`   –í—Ä–µ–º—è: ${new Date().toLocaleTimeString()}`);
          }
          
          const priceEl = document.getElementById(`price-${symbol}`);
          const changeEl = document.getElementById(`change-${symbol}`);
          const highEl = document.getElementById(`high-${symbol}`);
          const lowEl = document.getElementById(`low-${symbol}`);
          
          if (priceEl) {
            priceEl.textContent = `$${data[symbol].futures.price.toLocaleString('en-US', { minimumFractionDigits: 5, maximumFractionDigits: 5 })}`;
          }
          
          if (changeEl) {
            changeEl.textContent = `${data[symbol].futures.change24h >= 0 ? '+' : ''}${data[symbol].futures.change24h.toFixed(2)}%`;
            changeEl.className = `change ${data[symbol].futures.change24h >= 0 ? 'positive' : 'negative'}`;
          }
          
          if (highEl) {
            highEl.textContent = `$${data[symbol].futures.high24h.toLocaleString('en-US', { minimumFractionDigits: 5, maximumFractionDigits: 5 })}`;
          }
          
          if (lowEl) {
            lowEl.textContent = `$${data[symbol].futures.low24h.toLocaleString('en-US', { minimumFractionDigits: 5, maximumFractionDigits: 5 })}`;
          }
        }
      });
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏ –∏ –±–∞–ª–∞–Ω—Å –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω
      updateRSIPositions();
      updateRSIBalance();
      saveRSIData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
    }
    
    function updateAnalytics3m(data) {
      Object.keys(data).forEach(symbol => {
        if (data[symbol] && data[symbol].rsi !== undefined) {
          rsiData[symbol] = data[symbol].rsi;
          
          const rsiEl = document.getElementById(`rsi-${symbol}`);
          const signalEl = document.getElementById(`signal-${symbol}`);
          
          if (rsiEl && signalEl) {
            const rsi = data[symbol].rsi;
            rsiEl.textContent = rsi.toFixed(2);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–≤–µ—Ç RSI
            rsiEl.className = 'rsi-value';
            if (rsi <= RSI_LONG_THRESHOLD) {
              rsiEl.classList.add('oversold');
            } else if (rsi >= RSI_SHORT_THRESHOLD) {
              rsiEl.classList.add('overbought');
            } else {
              rsiEl.classList.add('neutral');
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏–≥–Ω–∞–ª
            signalEl.className = 'rsi-signal';
            if (rsi <= RSI_LONG_THRESHOLD) {
              signalEl.textContent = 'üü¢ LONG';
              signalEl.classList.add('long');
              checkRSISignal(symbol, 'LONG', rsi);
            } else if (rsi >= RSI_SHORT_THRESHOLD) {
              signalEl.textContent = 'üî¥ SHORT';
              signalEl.classList.add('short');
              checkRSISignal(symbol, 'SHORT', rsi);
            } else {
              signalEl.textContent = '‚ö™ –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ';
              signalEl.classList.add('neutral');
            }
          }
        }
      });
    }
    
    function checkRSISignal(symbol, direction, rsi) {
      const currentPrice = rsiLastPrices[symbol];
      if (!currentPrice) return;
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ —Ç–æ—Ä–≥–æ–≤–ª—è –ø–æ —ç—Ç–æ–π –º–æ–Ω–µ—Ç–µ
      if (!enabledCoins[symbol]) {
        console.log(`üö´ ${symbol}: –¢–æ—Ä–≥–æ–≤–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∞, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∏–≥–Ω–∞–ª`);
        return;
      }
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏ –ø–æ —ç—Ç–æ–π –º–æ–Ω–µ—Ç–µ
      const existingPosition = rsiOpenPositions.find(pos => pos.symbol === symbol);
      if (existingPosition) {
        console.log(`üö´ ${symbol}: –ü–æ–∑–∏—Ü–∏—è —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞ (${existingPosition.direction}), –ø—Ä–æ–ø—É—Å–∫–∞–µ–º`);
        return;
      }
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—É–ª–¥–∞—É–Ω
      const now = Date.now();
      if (rsiCooldownSymbols[symbol] && (now - rsiCooldownSymbols[symbol]) < 1000) {
        return; // –ö—É–ª–¥–∞—É–Ω 1 —Å–µ–∫—É–Ω–¥–∞
      }
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–π –±–∞–ª–∞–Ω—Å (—É—á–∏—Ç—ã–≤–∞–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞)
      const lockedInPositions = rsiOpenPositions.reduce((total, pos) => total + pos.amountUSD, 0);
      const availableBalance = 1000 + rsiRealizedPnL - lockedInPositions;
      const requiredBalance = POSITION_SIZE_USD; // –ë–ï–ó –ö–û–ú–ò–°–°–ò–ô
      
      if (availableBalance < requiredBalance) {
        console.log(`‚ùå ${symbol}: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è RSI —Å–¥–µ–ª–∫–∏`);
        console.log(`   –î–æ—Å—Ç—É–ø–Ω–æ: $${availableBalance.toFixed(2)}, —Ç—Ä–µ–±—É–µ—Ç—Å—è: $${requiredBalance.toFixed(2)}`);
        console.log(`   –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –≤ –ø–æ–∑–∏—Ü–∏—è—Ö: $${lockedInPositions.toFixed(2)}`);
        return;
      }
      
      // –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
      openRSIPosition(symbol, direction, currentPrice, rsi);
      rsiCooldownSymbols[symbol] = now;
    }
    
    function openRSIPosition(symbol, direction, entryPrice, rsi) {
      const volume = POSITION_SIZE_USD / entryPrice;
      const openCommission = 0; // –ë–ï–ó –ö–û–ú–ò–°–°–ò–ô –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      
      // RSI Long Only —Å—Ç—Ä–∞—Ç–µ–≥–∏—è: TP 0.5%, SL 0.25%
      const tpPrice = direction === 'LONG' 
        ? entryPrice * (1 + 0.5 / 100) 
        : entryPrice * (1 - 0.5 / 100);
      const slPrice = direction === 'LONG' 
        ? entryPrice * (1 - 0.25 / 100)
        : entryPrice * (1 + 0.25 / 100);
      
      // –û–¢–õ–ê–î–ö–ê –†–ê–°–ß–ï–¢–ê TP/SL
      console.log(`üîç –û–¢–õ–ê–î–ö–ê TP/SL –¥–ª—è ${symbol} ${direction}:`);
      console.log(`   –í—Ö–æ–¥: $${entryPrice.toFixed(4)}`);
      console.log(`   TP: $${tpPrice.toFixed(4)} (${direction === 'LONG' ? '+' : '-'}0.5%)`);
      console.log(`   SL: $${slPrice.toFixed(4)} (${direction === 'LONG' ? '-' : '+'}0.25%)`);
      console.log(`   –ü—Ä–æ–≤–µ—Ä–∫–∞ TP: ${entryPrice.toFixed(4)} * ${direction === 'LONG' ? '1.005' : '0.995'} = ${tpPrice.toFixed(4)}`);
      console.log(`   –ü—Ä–æ–≤–µ—Ä–∫–∞ SL: ${entryPrice.toFixed(4)} * ${direction === 'LONG' ? '0.9975' : '1.0025'} = ${slPrice.toFixed(4)}`);
      
      const position = {
        id: Date.now(),
        symbol: symbol,
        direction: direction,
        entryPrice: entryPrice,
        volume: volume,
        amountUSD: POSITION_SIZE_USD,
        tpPercent: 0.37,
        slPercent: 0.25,
        tpPrice: tpPrice,
        slPrice: slPrice,
        openCommission: openCommission,
        closeCommission: 0,
        totalCommission: openCommission,
        confidence: rsi <= RSI_LONG_THRESHOLD ? 85 : 85, // RSI —ç–∫—Å—Ç—Ä–µ–º—É–º—ã = –≤—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
        openTime: Date.now(),
        currentPrice: entryPrice,
        unrealizedPnL: 0,
        grossPnL: 0,
        netPnL: 0,
        strategy: 'RSI'
      };
      
      rsiOpenPositions.push(position);
      // –ù–ï –≤—ã—á–∏—Ç–∞–µ–º –∏–∑ –±–∞–ª–∞–Ω—Å–∞ - –±–∞–ª–∞–Ω—Å = –Ω–∞—á–∞–ª—å–Ω—ã–π + —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL
      rsiTotalCommissions += openCommission;
      
      console.log(`üöÄ RSI –ü–û–ó–ò–¶–ò–Ø: ${symbol} ${direction} @ $${entryPrice.toFixed(5)}`);
      console.log(`   RSI: ${rsi.toFixed(1)}, TP: $${tpPrice.toFixed(5)}, SL: $${slPrice.toFixed(5)}`);
      console.log(`   –û–±—ä–µ–º: ${volume.toFixed(6)}, –°—É–º–º–∞: $${POSITION_SIZE_USD.toFixed(2)}`);
      console.log(`   –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π TP: +$${(POSITION_SIZE_USD * 0.5 / 100).toFixed(2)}`);
      console.log(`   –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–π SL: -$${(POSITION_SIZE_USD * 0.25 / 100).toFixed(2)}`);
      
      updateRSIPositions();
      updateRSIBalance();
      saveRSIData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
    }

    // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è RSI –ø–æ–∑–∏—Ü–∏–∏
    function closeRSIPosition(positionId, exitPrice, reason) {
      console.log(`üîç –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ ID: ${positionId} (—Ç–∏–ø: ${typeof positionId})`);
      const positionIndex = rsiOpenPositions.findIndex(pos => pos.id === positionId);
      if (positionIndex === -1) {
        console.log('‚ùå –ü–æ–∑–∏—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è');
        return;
      }

      const position = rsiOpenPositions[positionIndex];
      const closeCommission = 0; // –ë–ï–ó –ö–û–ú–ò–°–°–ò–ô –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      
      // –†–∞—Å—á–µ—Ç PnL –ë–ï–ó –ö–û–ú–ò–°–°–ò–ô
      const pnl = position.direction === 'LONG' 
        ? (exitPrice - position.entryPrice) * position.volume
        : (position.entryPrice - exitPrice) * position.volume;
      
      const netPnL = pnl; // –ë–ï–ó –ö–û–ú–ò–°–°–ò–ô
      const pnlPercent = (netPnL / position.amountUSD) * 100;
      
      console.log(`üí∞ –ó–∞–∫—Ä—ã—Ç–∏–µ ${position.symbol} ${position.direction}:`);
      console.log(`   –í—Ö–æ–¥: $${position.entryPrice.toFixed(4)}, –í—ã—Ö–æ–¥: $${exitPrice.toFixed(4)}`);
      console.log(`   –û–±—ä–µ–º: ${position.volume.toFixed(6)}, –°—É–º–º–∞: $${position.amountUSD.toFixed(2)}`);
      console.log(`   PnL: $${netPnL.toFixed(2)} (${pnlPercent.toFixed(2)}%)`);
      console.log(`   –ü—Ä–∏—á–∏–Ω–∞: ${reason}`);
      console.log(`üîç –û–¢–õ–ê–î–ö–ê –¶–ï–ù:`);
      console.log(`   –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –∏–∑ rsiLastPrices: $${rsiLastPrices[position.symbol]?.toFixed(4) || '–ù–ï–¢'}`);
      console.log(`   –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: $${position.entryPrice.toFixed(4)}`);
      console.log(`   –¶–µ–Ω–∞ –≤—ã—Ö–æ–¥–∞: $${exitPrice.toFixed(4)}`);
      console.log(`   –†–∞–∑–Ω–∏—Ü–∞: ${((exitPrice - position.entryPrice) / position.entryPrice * 100).toFixed(2)}%`);

      // –°–æ–∑–¥–∞–µ–º –∑–∞–∫—Ä—ã—Ç—É—é —Å–¥–µ–ª–∫—É
      const closedDeal = {
        ...position,
        exitPrice: exitPrice,
        closeTime: Date.now(),
        closeCommission: closeCommission,
        totalCommission: position.openCommission + closeCommission,
        pnl: pnl,
        netPnL: netPnL,
        pnlPercent: pnlPercent,
        closeReason: reason
      };

      // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é (–ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
      const existingDeal = rsiClosedDeals.find(deal => deal.id === closedDeal.id);
      if (!existingDeal) {
        rsiClosedDeals.unshift(closedDeal); // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞ (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)
        console.log(`üìã –ù–æ–≤–∞—è —Å–¥–µ–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∏—Å—Ç–æ—Ä–∏—é: ${closedDeal.symbol} ${closedDeal.direction}`);
      } else {
        console.log(`‚ö†Ô∏è –°–¥–µ–ª–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏–∏: ${closedDeal.symbol} ${closedDeal.direction}`);
      }
      rsiOpenPositions.splice(positionIndex, 1);
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL (–±–∞–ª–∞–Ω—Å = –Ω–∞—á–∞–ª—å–Ω—ã–π + —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL)
      const oldRealizedPnL = rsiRealizedPnL;
      rsiRealizedPnL += netPnL;
      // rsiTotalCommissions += closeCommission; // –ë–ï–ó –ö–û–ú–ò–°–°–ò–ô

      console.log(`üîí RSI –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞: ${position.symbol} ${position.direction} @ $${exitPrice.toFixed(5)}`);
      console.log(`   PnL: ${netPnL >= 0 ? '+' : ''}$${netPnL.toFixed(2)} (${pnlPercent >= 0 ? '+' : ''}${pnlPercent.toFixed(2)}%)`);
      console.log(`   –ü—Ä–∏—á–∏–Ω–∞: ${reason}`);
      console.log(`   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL: $${oldRealizedPnL.toFixed(2)} ‚Üí $${rsiRealizedPnL.toFixed(2)} (+$${netPnL.toFixed(2)})`);
      console.log(`üìã –°–¥–µ–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –∏—Å—Ç–æ—Ä–∏—é. –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫: ${rsiClosedDeals.length}`);

      updateRSIPositions();
      updateRSIBalance();
      updateRSIHistory();
      saveRSIData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–¥–µ–ª–æ–∫ RSI
    function updateRSIHistory() {
      const container = document.getElementById('rsiHistoryContainer');
      const pagination = document.getElementById('rsiPagination');
      
      if (rsiClosedDeals.length === 0) {
        container.innerHTML = `
          <div class="no-history">
            <div class="no-history-icon">üìù</div>
            <div class="no-history-text">–ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫ –ø—É—Å—Ç–∞</div>
            <div class="no-history-desc">–ó–∞–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å</div>
          </div>
        `;
        pagination.style.display = 'none';
        updateRSIHistoryStats();
        return;
      }

      // –°–¥–µ–ª–∫–∏ —É–∂–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã (–Ω–æ–≤—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –Ω–∞—á–∞–ª–æ –º–∞—Å—Å–∏–≤–∞)
      const sortedDeals = rsiClosedDeals;
      
      // –í—ã—á–∏—Å–ª—è–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é
      const totalPages = Math.ceil(sortedDeals.length / rsiDealsPerPage);
      const startIndex = (rsiCurrentPage - 1) * rsiDealsPerPage;
      const endIndex = startIndex + rsiDealsPerPage;
      const pageDeals = sortedDeals.slice(startIndex, endIndex);

      // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–¥–µ–ª–∫–∏
      container.innerHTML = `
        <div class="history-list">
          ${pageDeals.map(deal => {
            const isProfit = deal.netPnL > 0;
            const duration = Math.round((deal.closeTime - deal.openTime) / 1000 / 60); // –º–∏–Ω—É—Ç—ã
            const closeTime = new Date(deal.closeTime).toLocaleString('ru-RU', {
              year: 'numeric',
              month: '2-digit',
              day: '2-digit',
              hour: '2-digit',
              minute: '2-digit',
              second: '2-digit',
              hour12: false
            });
            
            return `
              <div class="history-item ${deal.direction.toLowerCase()} ${isProfit ? 'profit' : 'loss'}">
                <div class="history-main">
                  <div class="history-symbol">${deal.symbol}</div>
                  <div class="history-direction ${deal.direction.toLowerCase()}">${deal.direction}</div>
                  <div class="history-prices">
                    <div>–í—Ö–æ–¥: $${deal.entryPrice.toFixed(4)}</div>
                    <div>–í—ã—Ö–æ–¥: $${deal.exitPrice.toFixed(4)}</div>
                    <div class="history-time">${closeTime} (${duration}–º)</div>
                  </div>
                </div>
                <div class="history-pnl ${isProfit ? 'positive' : 'negative'}">
                  ${isProfit ? '+' : ''}$${deal.netPnL.toFixed(2)}
                  <div style="font-size: 11px; color: #a0aec0;">
                    ${isProfit ? '+' : ''}${deal.pnlPercent.toFixed(2)}%
                  </div>
                </div>
              </div>
            `;
          }).join('')}
        </div>
      `;

      // –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é
      updateRSIPagination(totalPages);
      updateRSIHistoryStats();
      updateCryptoStats(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –º–æ–Ω–µ—Ç–∞–º
      updateLongShortStats(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É LONG/SHORT
      updateLossesStats(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É–±—ã—Ç–∫–æ–≤
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏
    function updateRSIHistoryStats() {
      const totalDeals = rsiClosedDeals.length;
      const winningDeals = rsiClosedDeals.filter(deal => deal.netPnL > 0).length;
      const losingDeals = rsiClosedDeals.filter(deal => deal.netPnL < 0).length;
      const winRate = totalDeals > 0 ? (winningDeals / totalDeals * 100).toFixed(1) : 0;
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É–º–º—É –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫
      const totalPnLFromHistory = rsiClosedDeals.reduce((sum, deal) => sum + deal.netPnL, 0);
      console.log(`üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏: –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫: ${totalDeals}, –°—É–º–º–∞ PnL: $${totalPnLFromHistory.toFixed(2)}, –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL: $${rsiRealizedPnL.toFixed(2)}`);
      
      if (Math.abs(totalPnLFromHistory - rsiRealizedPnL) > 0.01) {
        console.warn(`‚ö†Ô∏è –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–ï: –°—É–º–º–∞ —Å–¥–µ–ª–æ–∫ ($${totalPnLFromHistory.toFixed(2)}) ‚â† –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PnL ($${rsiRealizedPnL.toFixed(2)})`);
      }

      document.getElementById('rsiTotalDeals').textContent = totalDeals;
      document.getElementById('rsiWinningDeals').textContent = winningDeals;
      document.getElementById('rsiLosingDeals').textContent = losingDeals;
      document.getElementById('rsiHistoryWinRate').textContent = `${winRate}%`;
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
    function updateRSIPagination(totalPages) {
      const pagination = document.getElementById('rsiPagination');
      const pageInfo = document.getElementById('rsiPageInfo');
      const prevBtn = document.getElementById('rsiPrevPage');
      const nextBtn = document.getElementById('rsiNextPage');

      if (totalPages <= 1) {
        pagination.style.display = 'none';
        return;
      }

      pagination.style.display = 'flex';
      pageInfo.textContent = `–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${rsiCurrentPage} –∏–∑ ${totalPages}`;
      
      prevBtn.disabled = rsiCurrentPage <= 1;
      nextBtn.disabled = rsiCurrentPage >= totalPages;
    }

    // –°–º–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    function changeRSIPage(direction) {
      const totalPages = Math.ceil(rsiClosedDeals.length / rsiDealsPerPage);
      const newPage = rsiCurrentPage + direction;
      
      if (newPage >= 1 && newPage <= totalPages) {
        rsiCurrentPage = newPage;
        updateRSIHistory();
        saveRSIData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
      }
    }

    // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö RSI
    function clearRSIData() {
      if (confirm('‚ö†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ RSI?\n\n–≠—Ç–æ —É–¥–∞–ª–∏—Ç:\n- –í—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏\n- –í—Å—é –∏—Å—Ç–æ—Ä–∏—é —Å–¥–µ–ª–æ–∫\n- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –±–∞–ª–∞–Ω—Å\n\n–î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!')) {
        rsiOpenPositions = [];
        rsiClosedDeals = [];
        rsiRealizedPnL = 0;
        rsiTotalCommissions = 0;
        rsiCooldownSymbols = {};
        rsiLastPrices = {};
        rsiCurrentPage = 1;
        
        localStorage.removeItem('rsiLongTradingData');
        
        updateRSIBalance();
        updateRSIPositions();
        updateRSIHistory();
        
        console.log('üóëÔ∏è –í—Å–µ –¥–∞–Ω–Ω—ã–µ RSI –æ—á–∏—â–µ–Ω—ã');
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ –ø–æ —Ä—ã–Ω–∫—É (—Ä—É—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ)
    function closeRSIPositionByMarket(positionId) {
      console.log(`üîç –ü–û–ò–°–ö –ü–û–ó–ò–¶–ò–ò: ID=${positionId}, —Ç–∏–ø=${typeof positionId}`);
      console.log(`üìä –í–°–ï –ü–û–ó–ò–¶–ò–ò:`, rsiOpenPositions);
      console.log(`üìä –ö–û–õ–ò–ß–ï–°–¢–í–û –ü–û–ó–ò–¶–ò–ô:`, rsiOpenPositions.length);
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ –µ—Å—Ç—å
      if (rsiOpenPositions.length === 0) {
        console.log('‚ùå –ù–ï–¢ –û–¢–ö–†–´–¢–´–• –ü–û–ó–ò–¶–ò–ô');
        alert('‚ùå –ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è');
        return;
      }

      // –ò—â–µ–º –ø–æ–∑–∏—Ü–∏—é –ø–æ —Ä–∞–∑–Ω—ã–º —Ç–∏–ø–∞–º ID
      let position = null;
      let numericId = null;

      console.log(`üîç –ü–û–ò–°–ö –ü–û ID: ${positionId}`);
      
      // –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –∫–∞–∫ —á–∏—Å–ª–æ
      numericId = parseInt(positionId);
      console.log(`üîç –ü–ê–†–°–ò–ù–ì ID: ${numericId}`);
      position = rsiOpenPositions.find(pos => pos.id === numericId);
      console.log(`üîç –ü–û–ò–°–ö –ü–û ===:`, position);
      
      // –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –∫–∞–∫ —Å—Ç—Ä–æ–∫—É
      if (!position) {
        console.log(`üîç –ü–û–ò–°–ö –ü–û == (—Å—Ç—Ä–æ–∫–∞)`);
        position = rsiOpenPositions.find(pos => pos.id == positionId);
        console.log(`üîç –ü–û–ò–°–ö –ü–û ==:`, position);
        if (position) {
          numericId = position.id;
        }
      }

      if (!position) {
        console.log('‚ùå –ü–û–ó–ò–¶–ò–Ø –ù–ï –ù–ê–ô–î–ï–ù–ê');
        console.log(`‚ùå –ò–°–ö–û–ú–´–ô ID: ${positionId}`);
        console.log(`‚ùå –î–û–°–¢–£–ü–ù–´–ï ID:`, rsiOpenPositions.map(p => p.id));
        alert(`‚ùå –ü–æ–∑–∏—Ü–∏—è —Å ID ${positionId} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`);
        return;
      }

      console.log(`‚úÖ –ü–û–ó–ò–¶–ò–Ø –ù–ê–ô–î–ï–ù–ê:`, position);

      // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
      const currentPrice = rsiLastPrices[position.symbol];
      console.log(`üí∞ –¢–ï–ö–£–©–ê–Ø –¶–ï–ù–ê: ${position.symbol} = $${currentPrice}`);
      console.log(`üí∞ –í–°–ï –¶–ï–ù–´:`, rsiLastPrices);
      
      if (!currentPrice || currentPrice <= 0) {
        console.log('‚ùå –¢–ï–ö–£–©–ê–Ø –¶–ï–ù–ê –ù–ï–î–û–°–¢–£–ü–ù–ê');
        console.log(`‚ùå –¶–ï–ù–ê: ${currentPrice}`);
        alert(`‚ùå –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –¥–ª—è ${position.symbol} –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.`);
        return;
      }

      // –ú–ì–ù–û–í–ï–ù–ù–û–ï –ó–ê–ö–†–´–¢–ò–ï –ë–ï–ó –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø
      console.log(`üöÄ –ú–ì–ù–û–í–ï–ù–ù–û–ï –ó–ê–ö–†–´–¢–ò–ï –ë–ï–ó –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø`);
      console.log(`   –ü–æ–∑–∏—Ü–∏—è: ${position.symbol} ${position.direction}`);
      console.log(`   –í—Ö–æ–¥: $${position.entryPrice.toFixed(4)}`);
      console.log(`   –¢–µ–∫—É—â–∞—è: $${currentPrice.toFixed(4)}`);
      console.log(`   PnL: ${((currentPrice - position.entryPrice) * position.volume * (position.direction === 'LONG' ? 1 : -1)).toFixed(2)}`);

      // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ë–ï–ó –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
      {
        try {
          console.log(`üöÄ –ù–ê–ß–ò–ù–ê–ï–ú –ó–ê–ö–†–´–¢–ò–ï: ${position.symbol} ${position.direction}`);
          console.log(`   ID: ${numericId}, –¶–µ–Ω–∞: $${currentPrice.toFixed(4)}`);
          console.log(`   –í—Ö–æ–¥: $${position.entryPrice.toFixed(4)}`);
          
          console.log(`üîß –í–´–ó–´–í–ê–ï–ú closeRSIPosition...`);
          const result = closeRSIPosition(numericId, currentPrice, '–ó–∞–∫—Ä—ã—Ç–æ –≤—Ä—É—á–Ω—É—é');
          console.log(`üîß –†–ï–ó–£–õ–¨–¢–ê–¢ closeRSIPosition:`, result);
          
          console.log(`üîÑ –û–ë–ù–û–í–õ–Ø–ï–ú –ò–ù–¢–ï–†–§–ï–ô–°...`);
          updateRSIPositions();
          updateRSIBalance();
          updateRSIHistory();
          
          console.log(`‚úÖ –ü–û–ó–ò–¶–ò–Ø –ó–ê–ö–†–´–¢–ê –ò –ò–ù–¢–ï–†–§–ï–ô–° –û–ë–ù–û–í–õ–ï–ù!`);
          alert(`‚úÖ –ü–æ–∑–∏—Ü–∏—è ${position.symbol} –∑–∞–∫—Ä—ã—Ç–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!`);
          
        } catch (error) {
          console.error('‚ùå –û–®–ò–ë–ö–ê –ü–†–ò –ó–ê–ö–†–´–¢–ò–ò:', error);
          console.error('‚ùå –°–¢–ï–ö –û–®–ò–ë–ö–ò:', error.stack);
          alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
        }
      }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –º–æ–Ω–µ—Ç–∞–º
    function updateCryptoStats() {
      const container = document.getElementById('cryptoStatsGrid');
      if (!container) return;

      // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç–µ
      const cryptoStats = {};
      const cryptos = ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'BNBUSDT', 'DOGEUSDT'];
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –≤—Å–µ—Ö –º–æ–Ω–µ—Ç
      cryptos.forEach(symbol => {
        cryptoStats[symbol] = {
          symbol: symbol,
          totalDeals: 0,
          profitableDeals: 0,
          totalPnL: 0,
          winRate: 0,
          avgPnL: 0,
          totalTP: 0,
          totalSL: 0,
          avgTP: 0,
          avgSL: 0
        };
      });

      // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å–¥–µ–ª–æ–∫
      rsiClosedDeals.forEach(deal => {
        const symbol = deal.symbol;
        if (cryptoStats[symbol]) {
          cryptoStats[symbol].totalDeals++;
          cryptoStats[symbol].totalPnL += deal.pnl;
          
          if (deal.pnl > 0) {
            cryptoStats[symbol].profitableDeals++;
            cryptoStats[symbol].totalTP += deal.pnl; // –ü—Ä–∏–±—ã–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ = —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç
          } else {
            cryptoStats[symbol].totalSL += Math.abs(deal.pnl); // –£–±—ã—Ç–æ—á–Ω—ã–µ —Å–¥–µ–ª–∫–∏ = —Å—Ç–æ–ø-–ª–æ—Å—Å
          }
        }
      });

      // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
      Object.values(cryptoStats).forEach(stat => {
        if (stat.totalDeals > 0) {
          stat.winRate = (stat.profitableDeals / stat.totalDeals * 100).toFixed(1);
          stat.avgPnL = (stat.totalPnL / stat.totalDeals).toFixed(2);
          
          // –°—Ä–µ–¥–Ω–∏–π —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç
          if (stat.profitableDeals > 0) {
            stat.avgTP = (stat.totalTP / stat.profitableDeals).toFixed(2);
          }
          
          // –°—Ä–µ–¥–Ω–∏–π —Å—Ç–æ–ø-–ª–æ—Å—Å
          const losingDeals = stat.totalDeals - stat.profitableDeals;
          if (losingDeals > 0) {
            stat.avgSL = (stat.totalSL / losingDeals).toFixed(2);
          }
        }
      });

      // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —É–±—ã–≤–∞–Ω–∏—é PnL (–æ—Ç –ø—Ä–∏–±—ã–ª—å–Ω–æ–π –∫ —É–±—ã—Ç–æ—á–Ω–æ–π)
      const sortedStats = Object.values(cryptoStats).sort((a, b) => b.totalPnL - a.totalPnL);
      const topProfit = sortedStats[0];
      const topLoss = sortedStats[sortedStats.length - 1];

      // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      const overallStats = {
        totalDeals: 0,
        totalPnL: 0,
        totalTP: 0,
        totalSL: 0,
        profitableDeals: 0,
        losingDeals: 0,
        avgTP: 0,
        avgSL: 0,
        winRate: 0
      };

      Object.values(cryptoStats).forEach(stat => {
        overallStats.totalDeals += stat.totalDeals;
        overallStats.totalPnL += stat.totalPnL;
        overallStats.totalTP += stat.totalTP;
        overallStats.totalSL += stat.totalSL;
        overallStats.profitableDeals += stat.profitableDeals;
        overallStats.losingDeals += (stat.totalDeals - stat.profitableDeals);
      });

      // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—â–∏–µ —Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
      if (overallStats.profitableDeals > 0) {
        overallStats.avgTP = (overallStats.totalTP / overallStats.profitableDeals).toFixed(2);
      }
      if (overallStats.losingDeals > 0) {
        overallStats.avgSL = (overallStats.totalSL / overallStats.losingDeals).toFixed(2);
      }
      if (overallStats.totalDeals > 0) {
        overallStats.winRate = (overallStats.profitableDeals / overallStats.totalDeals * 100).toFixed(1);
      }

      // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      const overallContainer = document.getElementById('overallStats');
      if (overallContainer) {
        overallContainer.innerHTML = `
          <h3>üéØ –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –º–æ–Ω–µ—Ç–∞–º</h3>
          <div class="overall-metrics">
            <div class="overall-metric">
              <div class="overall-metric-label">–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫</div>
              <div class="overall-metric-value">${overallStats.totalDeals}</div>
            </div>
            <div class="overall-metric">
              <div class="overall-metric-label">–û–±—â–∏–π PnL</div>
              <div class="overall-metric-value">${overallStats.totalPnL > 0 ? '+' : ''}${overallStats.totalPnL.toFixed(2)} USDT</div>
            </div>
            <div class="overall-metric">
              <div class="overall-metric-label">–í–∏–Ω—Ä–µ–π—Ç</div>
              <div class="overall-metric-value">${overallStats.winRate}%</div>
            </div>
            <div class="overall-metric">
              <div class="overall-metric-label">–°—Ä–µ–¥–Ω–∏–π –¢–µ–π–∫</div>
              <div class="overall-metric-value">${overallStats.avgTP} USDT</div>
            </div>
            <div class="overall-metric">
              <div class="overall-metric-label">–°—Ä–µ–¥–Ω–∏–π –°—Ç–æ–ø</div>
              <div class="overall-metric-value">${overallStats.avgSL} USDT</div>
            </div>
          </div>
        `;
      }

      // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      container.innerHTML = sortedStats.map(stat => {
        const iconClass = stat.symbol.toLowerCase().replace('usdt', '');
        const iconMap = {
          'btc': '‚Çø',
          'eth': 'Œû',
          'sol': '‚óé',
          'xrp': 'X',
          'bnb': 'B',
          'doge': 'ƒê'
        };

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å –∫–∞—Ä—Ç–æ—á–∫–∏
        let cardClass = 'stat-card';
        if (stat.symbol === topProfit.symbol && stat.totalPnL > 0) {
          cardClass += ' top-profit';
        } else if (stat.symbol === topLoss.symbol && stat.totalPnL < 0) {
          cardClass += ' top-loss';
        } else if (stat.totalPnL > 0) {
          cardClass += ' profitable';
        } else if (stat.totalPnL < 0) {
          cardClass += ' loss';
        }

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª–∞—Å—Å PnL
        let pnlClass = 'stat-pnl';
        if (stat.totalPnL > 0) {
          pnlClass += ' positive';
        } else if (stat.totalPnL < 0) {
          pnlClass += ' negative';
        } else {
          pnlClass += ' neutral';
        }

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–µ–π–¥–∂
        let badge = '';
        if (stat.symbol === topProfit.symbol && stat.totalPnL > 0) {
          badge = '<div class="stat-badge top-profit">–¢–û–ü –ü–†–ò–ë–´–õ–¨</div>';
        } else if (stat.symbol === topLoss.symbol && stat.totalPnL < 0) {
          badge = '<div class="stat-badge top-loss">–¢–û–ü –£–ë–´–¢–û–ö</div>';
        }

        return `
          <div class="${cardClass}">
            ${badge}
            <div class="stat-header">
              <div class="stat-icon ${iconClass}">${iconMap[iconClass] || '?'}</div>
              <div class="stat-title">${stat.symbol}</div>
            </div>
            
            <div class="stat-metrics">
              <div class="stat-metric">
                <div class="stat-metric-label">–°–¥–µ–ª–æ–∫</div>
                <div class="stat-metric-value">${stat.totalDeals}</div>
              </div>
              <div class="stat-metric">
                <div class="stat-metric-label">–í–∏–Ω—Ä–µ–π—Ç</div>
                <div class="stat-metric-value">${stat.winRate}%</div>
              </div>
              <div class="stat-metric">
                <div class="stat-metric-label">–°—Ä. –¢–µ–π–∫</div>
                <div class="stat-metric-value">${stat.avgTP || '0.00'}</div>
              </div>
              <div class="stat-metric">
                <div class="stat-metric-label">–°—Ä. –°—Ç–æ–ø</div>
                <div class="stat-metric-value">${stat.avgSL || '0.00'}</div>
              </div>
            </div>
            
            <div class="${pnlClass}">
              ${stat.totalPnL > 0 ? '+' : ''}${stat.totalPnL.toFixed(2)} USDT
            </div>
          </div>
        `;
      }).join('');
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ LONG/SHORT
    function updateLongShortStats() {
      const container = document.getElementById('longShortStatsGrid');
      if (!container) return;

      // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ LONG –∏ SHORT —Å–¥–µ–ª–∫–∞–º
      const longStats = {
        totalDeals: 0,
        profitableDeals: 0,
        losingDeals: 0,
        totalPnL: 0,
        totalProfit: 0,
        totalLoss: 0
      };

      const shortStats = {
        totalDeals: 0,
        profitableDeals: 0,
        losingDeals: 0,
        totalPnL: 0,
        totalProfit: 0,
        totalLoss: 0
      };

      // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Å–µ –∑–∞–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏
      rsiClosedDeals.forEach(deal => {
        if (deal.direction === 'LONG') {
          longStats.totalDeals++;
          longStats.totalPnL += deal.pnl;
          
          if (deal.pnl > 0) {
            longStats.profitableDeals++;
            longStats.totalProfit += deal.pnl;
          } else {
            longStats.losingDeals++;
            longStats.totalLoss += Math.abs(deal.pnl);
          }
        } else if (deal.direction === 'SHORT') {
          shortStats.totalDeals++;
          shortStats.totalPnL += deal.pnl;
          
          if (deal.pnl > 0) {
            shortStats.profitableDeals++;
            shortStats.totalProfit += deal.pnl;
          } else {
            shortStats.losingDeals++;
            shortStats.totalLoss += Math.abs(deal.pnl);
          }
        }
      });

      // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç—ã
      const longWinRate = longStats.totalDeals > 0 ? ((longStats.profitableDeals / longStats.totalDeals) * 100).toFixed(1) : 0;
      const shortWinRate = shortStats.totalDeals > 0 ? ((shortStats.profitableDeals / shortStats.totalDeals) * 100).toFixed(1) : 0;

      // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      container.innerHTML = `
        <div class="long-short-card long">
          <div class="long-short-header">
            <div class="long-short-icon long">üìà</div>
            <div class="long-short-title">LONG –°–¥–µ–ª–∫–∏</div>
          </div>
          <div class="long-short-stats">
            <div class="long-short-stat">
              <div class="long-short-stat-label">–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫</div>
              <div class="long-short-stat-value">${longStats.totalDeals}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö</div>
              <div class="long-short-stat-value positive">${longStats.profitableDeals}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–£–±—ã—Ç–æ—á–Ω—ã—Ö</div>
              <div class="long-short-stat-value negative">${longStats.losingDeals}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–í–∏–Ω—Ä–µ–π—Ç</div>
              <div class="long-short-stat-value">${longWinRate}%</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–û–±—â–∏–π PnL</div>
              <div class="long-short-stat-value ${longStats.totalPnL >= 0 ? 'positive' : 'negative'}">$${longStats.totalPnL.toFixed(2)}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–ü—Ä–∏–±—ã–ª—å</div>
              <div class="long-short-stat-value positive">$${longStats.totalProfit.toFixed(2)}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–£–±—ã—Ç–∫–∏</div>
              <div class="long-short-stat-value negative">$${longStats.totalLoss.toFixed(2)}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–°—Ä–µ–¥–Ω–∏–π PnL</div>
              <div class="long-short-stat-value ${longStats.totalDeals > 0 ? (longStats.totalPnL / longStats.totalDeals >= 0 ? 'positive' : 'negative') : ''}">
                ${longStats.totalDeals > 0 ? '$' + (longStats.totalPnL / longStats.totalDeals).toFixed(2) : '$0.00'}
              </div>
            </div>
          </div>
        </div>

        <div class="long-short-card short">
          <div class="long-short-header">
            <div class="long-short-icon short">üìâ</div>
            <div class="long-short-title">SHORT –°–¥–µ–ª–∫–∏</div>
          </div>
          <div class="long-short-stats">
            <div class="long-short-stat">
              <div class="long-short-stat-label">–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫</div>
              <div class="long-short-stat-value">${shortStats.totalDeals}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö</div>
              <div class="long-short-stat-value positive">${shortStats.profitableDeals}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–£–±—ã—Ç–æ—á–Ω—ã—Ö</div>
              <div class="long-short-stat-value negative">${shortStats.losingDeals}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–í–∏–Ω—Ä–µ–π—Ç</div>
              <div class="long-short-stat-value">${shortWinRate}%</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–û–±—â–∏–π PnL</div>
              <div class="long-short-stat-value ${shortStats.totalPnL >= 0 ? 'positive' : 'negative'}">$${shortStats.totalPnL.toFixed(2)}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–ü—Ä–∏–±—ã–ª—å</div>
              <div class="long-short-stat-value positive">$${shortStats.totalProfit.toFixed(2)}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–£–±—ã—Ç–∫–∏</div>
              <div class="long-short-stat-value negative">$${shortStats.totalLoss.toFixed(2)}</div>
            </div>
            <div class="long-short-stat">
              <div class="long-short-stat-label">–°—Ä–µ–¥–Ω–∏–π PnL</div>
              <div class="long-short-stat-value ${shortStats.totalDeals > 0 ? (shortStats.totalPnL / shortStats.totalDeals >= 0 ? 'positive' : 'negative') : ''}">
                ${shortStats.totalDeals > 0 ? '$' + (shortStats.totalPnL / shortStats.totalDeals).toFixed(2) : '$0.00'}
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
    function updateLossesStats() {
      const container = document.getElementById('lossesGrid');
      if (!container) return;

      // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –ø–æ –∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç–µ
      const lossesStats = {};
      const cryptos = ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'BNBUSDT', 'DOGEUSDT'];

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –≤—Å–µ—Ö –º–æ–Ω–µ—Ç
      cryptos.forEach(symbol => {
        lossesStats[symbol] = {
          symbol: symbol,
          losingDeals: 0,
          totalLoss: 0,
          avgLoss: 0
        };
      });

      // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ —Å–¥–µ–ª–∫–∏
      rsiClosedDeals.forEach(deal => {
        if (deal.pnl < 0) { // –¢–æ–ª—å–∫–æ —É–±—ã—Ç–æ—á–Ω—ã–µ —Å–¥–µ–ª–∫–∏
          const symbol = deal.symbol;
          if (lossesStats[symbol]) {
            lossesStats[symbol].losingDeals++;
            lossesStats[symbol].totalLoss += Math.abs(deal.pnl);
          }
        }
      });

      // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫
      Object.values(lossesStats).forEach(stat => {
        if (stat.losingDeals > 0) {
          stat.avgLoss = (stat.totalLoss / stat.losingDeals).toFixed(2);
        }
      });

      // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –º–æ–Ω–µ—Ç—ã —Å —É–±—ã—Ç–∫–∞–º–∏ –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã—Ç–∫—É
      const sortedLosses = Object.values(lossesStats)
        .filter(stat => stat.losingDeals > 0)
        .sort((a, b) => b.totalLoss - a.totalLoss);

      // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —É–±—ã—Ç–∫–æ–≤
      container.innerHTML = sortedLosses.map(stat => {
        const iconClass = stat.symbol.toLowerCase().replace('usdt', '');
        const iconMap = {
          'btc': '‚Çø',
          'eth': 'Œû',
          'sol': '‚óé',
          'xrp': 'X',
          'bnb': 'B',
          'doge': 'ƒê'
        };

        return `
          <div class="loss-card">
            <div class="loss-badge">–£–ë–´–¢–û–ö</div>
            <div class="loss-header">
              <div class="loss-icon ${iconClass}">${iconMap[iconClass] || '?'}</div>
              <div class="loss-title">${stat.symbol}</div>
            </div>

            <div class="loss-metrics">
              <div class="loss-metric">
                <div class="loss-metric-label">–£–±—ã—Ç–æ—á–Ω—ã—Ö</div>
                <div class="loss-metric-value">${stat.losingDeals}</div>
              </div>
              <div class="loss-metric">
                <div class="loss-metric-label">–°—Ä–µ–¥–Ω–∏–π</div>
                <div class="loss-metric-value">${stat.avgLoss} USDT</div>
              </div>
            </div>

            <div class="loss-amount">
              -${stat.totalLoss.toFixed(2)} USDT
            </div>
          </div>
        `;
      }).join('');

      // –ï—Å–ª–∏ –Ω–µ—Ç —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
      if (sortedLosses.length === 0) {
        container.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666;">
            <div style="font-size: 48px; margin-bottom: 20px;">üéâ</div>
            <h3 style="color: #4CAF50; margin-bottom: 10px;">–û—Ç–ª–∏—á–Ω–æ!</h3>
            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –ø–æ RSI —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</p>
          </div>
        `;
      }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª–µ–π
    function initializeTradingControls() {
      const container = document.getElementById('coinsToggleGrid');
      if (!container) return;

      const cryptos = ['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'BNBUSDT', 'DOGEUSDT'];
      const iconMap = {
        'BTCUSDT': { icon: '‚Çø', class: 'btc' },
        'ETHUSDT': { icon: 'Œû', class: 'eth' },
        'SOLUSDT': { icon: '‚óé', class: 'sol' },
        'XRPUSDT': { icon: 'X', class: 'xrp' },
        'BNBUSDT': { icon: 'B', class: 'bnb' },
        'DOGEUSDT': { icon: 'ƒê', class: 'doge' }
      };

      container.innerHTML = cryptos.map(symbol => {
        const isEnabled = enabledCoins[symbol];
        const iconData = iconMap[symbol];
        
        return `
          <div class="coin-toggle ${isEnabled ? '' : 'disabled'}" data-symbol="${symbol}">
            <div class="coin-info">
              <div class="coin-icon ${iconData.class}">${iconData.icon}</div>
              <div>
                <div class="coin-name">${symbol}</div>
                <div class="coin-status">${isEnabled ? '–¢–æ—Ä–≥–æ–≤–ª—è –≤–∫–ª—é—á–µ–Ω–∞' : '–¢–æ—Ä–≥–æ–≤–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∞'}</div>
              </div>
            </div>
            <div class="toggle-switch ${isEnabled ? 'active' : 'disabled'}" data-symbol="${symbol}">
              <div class="toggle-slider"></div>
            </div>
          </div>
        `;
      }).join('');

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π
      container.addEventListener('click', function(e) {
        const toggle = e.target.closest('.toggle-switch');
        if (toggle) {
          const symbol = toggle.dataset.symbol;
          toggleCoin(symbol);
        }
      });

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–í–∫–ª—é—á–∏—Ç—å –≤—Å–µ" / "–û—Ç–∫–ª—é—á–∏—Ç—å –≤—Å–µ"
      document.getElementById('enableAllCoins')?.addEventListener('click', () => {
        Object.keys(enabledCoins).forEach(symbol => {
          enabledCoins[symbol] = true;
        });
        updateTradingControls();
        saveRSIData();
        console.log('‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è –≤–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –º–æ–Ω–µ—Ç');
      });

      document.getElementById('disableAllCoins')?.addEventListener('click', () => {
        Object.keys(enabledCoins).forEach(symbol => {
          enabledCoins[symbol] = false;
        });
        updateTradingControls();
        saveRSIData();
        console.log('‚ùå –¢–æ—Ä–≥–æ–≤–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –º–æ–Ω–µ—Ç');
      });
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–æ–Ω–µ—Ç—ã
    function toggleCoin(symbol) {
      enabledCoins[symbol] = !enabledCoins[symbol];
      updateTradingControls();
      saveRSIData();
      
      const status = enabledCoins[symbol] ? '–≤–∫–ª—é—á–µ–Ω–∞' : '–æ—Ç–∫–ª—é—á–µ–Ω–∞';
      console.log(`üîÑ –¢–æ—Ä–≥–æ–≤–ª—è ${symbol} ${status}`);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    function updateTradingControls() {
      const container = document.getElementById('coinsToggleGrid');
      if (!container) return;

      container.querySelectorAll('.coin-toggle').forEach(toggle => {
        const symbol = toggle.dataset.symbol;
        const isEnabled = enabledCoins[symbol];
        const toggleSwitch = toggle.querySelector('.toggle-switch');
        const statusText = toggle.querySelector('.coin-status');
        
        toggle.classList.toggle('disabled', !isEnabled);
        toggleSwitch.classList.toggle('active', isEnabled);
        toggleSwitch.classList.toggle('disabled', !isEnabled);
        statusText.textContent = isEnabled ? '–¢–æ—Ä–≥–æ–≤–ª—è –≤–∫–ª—é—á–µ–Ω–∞' : '–¢–æ—Ä–≥–æ–≤–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∞';
      });
    }
    
    // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ TP/SL –¥–ª—è RSI –ø–æ–∑–∏—Ü–∏–π
    setInterval(() => {
      if (rsiOpenPositions.length > 0) {
        rsiOpenPositions.forEach((position, index) => {
          const currentPrice = rsiLastPrices[position.symbol];
          if (currentPrice) {
            position.currentPrice = currentPrice;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ TP/SL
            if (position.direction === 'LONG' && currentPrice >= position.tpPrice) {
              closeRSIPosition(position.id, position.tpPrice, 'Take Profit');
            } else if (position.direction === 'LONG' && currentPrice <= position.slPrice) {
              closeRSIPosition(position.id, position.slPrice, 'Stop Loss');
            } else if (position.direction === 'SHORT' && currentPrice <= position.tpPrice) {
              closeRSIPosition(position.id, position.tpPrice, 'Take Profit');
            } else if (position.direction === 'SHORT' && currentPrice >= position.slPrice) {
              closeRSIPosition(position.id, position.slPrice, 'Stop Loss');
            }
          }
        });
      }
    }, 100);
    
  </script>
</body>
</html>
